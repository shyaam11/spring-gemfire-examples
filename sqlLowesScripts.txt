 

--Creating Lowes Coupon Details Table
 
 CREATE TABLE "SRSCOUPONSSCH"."TSRS_LOWES_COUPON_DTL" 
   (	"CLIENT_NAME" VARCHAR2(4), 
        "COUPON_TYPE" VARCHAR2(12),
	"COUPON_NUMBER" VARCHAR2(15),  
	"CREATED_BY" VARCHAR2(10), 
	"CREATED_DATE" TIMESTAMP (6), 
	"UPDATED_BY" VARCHAR2(10), 
	"UPDATED_DATE" TIMESTAMP (6), 
	"BATCH_REF_ID" NUMBER(10,0),
    "COUPON_PURGE_STATUS" VARCHAR2(1), 
	"SRS_LOWES_COUPON_ID" VARCHAR2(20) NOT NULL,
	"ISSUE_DATE" TIMESTAMP (6),
         "VALID_START_DATE" TIMESTAMP (6),
          "VALID_END_DATE" TIMESTAMP (6)
        
	 
   );





--creating Lowes Request Response Table

  CREATE TABLE "SRSCOUPONSSCH"."TSRS_LOWES_COUPON_REQRES_DTLS" 
   (	"ACCOUNT_NUMBER" VARCHAR2(16), 
	"SYF_COUPON_REF_ID" VARCHAR2(16), 
	"CLIENT_ID" VARCHAR2(8), 
	"TRANSACTION_ID" VARCHAR2(36), 
	"CUSTOMER_ID" VARCHAR2(16), 
	"STATUS_CODE" NUMBER(4,0) NOT NULL ,
	"CREATED_BY" VARCHAR2(10), 
	"CREATED_DATE" TIMESTAMP (6), 
	"UPDATED_BY" VARCHAR2(10), 
	"UPDATED_DATE" TIMESTAMP (6), 
	"ISCOUPON_USED" VARCHAR2(1), 
	"SRS_LOWES_COUPON_ID" VARCHAR2(20), 
	"CHANNEL_ID" VARCHAR2(8), 
	"ONLINE_CODE" VARCHAR2(7),
	"LOWES_REQUEST_ID" NUMBER(10,0) NOT NULL 
   ) ;

---Adding primary key constraint
     
      ALTER TABLE TSRS_LOWES_COUPON_DTL ADD  CONSTRAINT "TSRS_LOWES_COUPON_DETAILS_PK" PRIMARY KEY ("SRS_LOWES_COUPON_ID");


--Adding Foreign key constraint

       ALTER TABLE TSRS_LOWES_COUPON_DTL ADD CONSTRAINT "TSRS_LOWES_COUPON_DETAILS_FK" FOREIGN KEY ("BATCH_REF_ID")
	  REFERENCES "SRSCOUPONSSCH"."TSRS_BATCH_COMMON_DETAILS" ("BATCH_REF_ID");	 
	 

---Adding primary key constraint
     
      ALTER TABLE TSRS_LOWES_COUPON_REQRES_DTLS ADD  CONSTRAINT "TSRS_LOWES_COUPON_REQRES_DTLS_PK" PRIMARY KEY ("LOWES_REQUEST_ID");

---Adding Foreign key constraint
     
      ALTER TABLE TSRS_LOWES_COUPON_REQRES_DTLS ADD CONSTRAINT "TSRS_LOWES_COUPON_REQRES_FK1"  FOREIGN KEY ("SRS_LOWES_COUPON_ID")
            REFERENCES "SRSCOUPONSSCH"."TSRS_LOWES_COUPON_DTL" ("SRS_LOWES_COUPON_ID");


---Adding Foreign key constraint
     
       ALTER TABLE TSRS_LOWES_COUPON_REQRES_DTLS ADD CONSTRAINT "TSRS_LOWES_COUPON_REQRES_FK2" FOREIGN KEY ("STATUS_CODE")
            REFERENCES "SRSCOUPONSSCH"."TSRS_COUPON_WS_STATUS" ("STATUS_CODE");


--creating sequence

CREATE SEQUENCE  SRSCOUPONSSCH.SRS_LOWES_COUPON_ID_SEQ MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 ORDER  NOCYCLE ;
CREATE SEQUENCE  SRSCOUPONSSCH.COUPON_LOWES_TRANSACTION_ID_SEQ  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 ORDER  NOCYCLE ;
CREATE SEQUENCE  SRSCOUPONSSCH.LOWES_REQUEST_ID_SEQ  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 ORDER  NOCYCLE ;



--Creating public synonym

CREATE OR REPLACE PUBLIC SYNONYM "TSRS_LOWES_COUPON_DTL" FOR "SRSCOUPONSSCH"."TSRS_LOWES_COUPON_DTL";
CREATE OR REPLACE PUBLIC SYNONYM "TSRS_LOWES_COUPON_REQRES_DTLS" FOR "SRSCOUPONSSCH"."TSRS_LOWES_COUPON_REQRES_DTLS";





--Grant to user on synonym 

GRANT  SELECT,INSERT,UPDATE,DELETE  ON TSRS_LOWES_COUPON_DTL TO SRSCOUPONSUSR;
GRANT  SELECT,INSERT,UPDATE,DELETE  ON TSRS_LOWES_COUPON_REQRES_DTLS TO SRSCOUPONSUSR;



--Grant to user On sequence

GRANT SELECT ON SRSCOUPONSSCH.SRS_LOWES_COUPON_ID_SEQ TO SRSCOUPONSUSR;
GRANT SELECT ON SRSCOUPONSSCH.COUPON_LOWES_TRANSACTION_ID_SEQ TO SRSCOUPONSUSR;
GRANT SELECT ON SRSCOUPONSSCH.LOWES_REQUEST_ID_SEQ TO SRSCOUPONSUSR;

   
 